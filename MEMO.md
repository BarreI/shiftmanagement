#このファイルについて
このファイルはメモする場所です

税金関係の給与計算は今回は除外

#TODO 全体的な不親切な部分を直す

#TODO ページに残された状態でサーバー再起がかかった時の処理
具体的には認証はできるがページを表示させられるだけのデータがない時
#TODO ユーザーに見えせるエラーメッセージ
ログイン時の入力データ不備など


ログイン周りTODO

入力時の入力不備をユーザーに伝える
パスワードを入力時見えるようにする
メールアドレス、パスワード、idを変更可能にする

#TODO ユーザーデータに変更が会った時セッションを更新
理由はsessionの有効期限をupdatedで決めるから


login/logout ログインとログアウト
account アカウントの新規作成
secondauth メール認証の時にふむurl
homepage loginした後に初めて入るページ
newstore 新しく店舗を作成する
join 店の固有idを使って店側に参加リクエストを送信する
mystore 自信が参加している店舗のページに飛ぶ
mystore/edit おーな権限を持つ人間がユーザーからの要望を元にshiftを作成するページ
→https://www.grapecity.co.jp/developer/wijmo/flexchart?utm_medium=gsn&utm_source=google&gclid=Cj0KCQjw5PGFBhC2ARIsAIFIMNciYLjZQfLd6iGA-cZXtbNQEidikn5PhjqJ9NwGYG0OaaEzmOelnEoaAo2YEALw_wcB

ユーザーがシフトに対して要望を伝えるのは
モーダルを利用して、時間と理由を申請してもらう
全体像としてはカレンダーをページに表示してモーダルの入子構造にしていく

自動でシフトを作成することに傾けていくべき
例として欠席の連絡が入った場合いけないと申請していない人向けに入ってもらえるかのメッセージを飛ばすそこでyes/no 選んでもらってシフトを埋めるようにする

チャットなどといった次元から離れるべき

人の手を使わずにできるだけすませる


#TODO ライン認証google認証


自動でシフトをある程度作ることを考えてユーザーが行ける時間帯のデータの管理を文字列で行う
tとfで構成された288文字の文字列
１文字で対応する5分の時間に入れるかどうかをはんだんしている

#TODO 超重要事項
shiftテーブルは全て変更を加える

#TODO passwordを忘れた場合の処理

#TODO accoutのエラー分岐が細かすぎるせいでアカウントの存在が攻撃者にバレるので修正

#TODO スパム対策

#TODO branch homestoreでやること
現在join page からリクエストを店側に送信するところまでできているので
・homepageでの所持ストア参加ストアの表示 storecount で for
・所持ストアでおーなーがユーザーの参加を許可できるようにする

#TODO newstore pageのデータを増やすこと
上限数に達しているときにそもそも開かせない処理か
上限に引っかかってるときに作成したばあい注意を促すかする


#TODO 二段階認証を求める流れを見直した方がいい

#TODO ストアに営業時間のカラムを追加
曜日ごとにtf管理するか平日と休日をわけて管理するか

tf管理の場合給与が上がる時間帯も指定できるためいいかもしれない

branch timetabel でやること
timetable をつくる
その他もろもろ DBの変更

aff に基本金額を持たせて
shiftにいくら稼いだか持たせる