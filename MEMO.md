#このファイルについて
このファイルはメモする場所です

税金関係の給与計算は今回は除外
SEO対策もコンテストでは不要


#TODO 全体的な不親切な部分を直す

#TODO ページに残された状態でサーバー再起がかかった時の処理
具体的には認証はできるがページを表示させられるだけのデータがない時
#TODO ユーザーに見えせるエラーメッセージ
ログイン時の入力データ不備など

### 実際の運用を考えて
urlの構造はしっかりと見直した方がいいと思う
現状では全てが独立してしまっているのでユーザーからするとかなり不親切な気がする
階層構造にすることは偏移さきやurlを書き換えるだけなので比較的簡単にできそう

ログイン周りTODO

入力時の入力不備をユーザーに伝える 
パスワードを入力時見えるようにする
メールアドレス、パスワード、idを変更可能にする

#TODO ユーザーデータに変更が会った時セッションを更新
理由はsessionの有効期限をupdatedで決めるから


login/logout ログインとログアウト
account アカウントの新規作成
secondauth メール認証の時にふむurl
homepage loginした後に初めて入るページ
newstore 新しく店舗を作成する
join 店の固有idを使って店側に参加リクエストを送信する
mystore 自信が参加している店舗のページに飛ぶ
mystore/edit おーな権限を持つ人間がユーザーからの要望を元にshiftを作成するページ
→https://www.grapecity.co.jp/developer/wijmo/flexchart?utm_medium=gsn&utm_source=google&gclid=Cj0KCQjw5PGFBhC2ARIsAIFIMNciYLjZQfLd6iGA-cZXtbNQEidikn5PhjqJ9NwGYG0OaaEzmOelnEoaAo2YEALw_wcB

ユーザーがシフトに対して要望を伝えるのは
モーダルを利用して、時間と理由を申請してもらう
全体像としてはカレンダーをページに表示してモーダルの入子構造にしていく

自動でシフトを作成することに傾けていくべき
例として欠席の連絡が入った場合いけないと申請していない人向けに入ってもらえるかのメッセージを飛ばすそこでyes/no 選んでもらってシフトを埋めるようにする

チャットなどといった次元から離れるべき

人の手を使わずにできるだけすませる


#TODO ライン認証google認証


自動でシフトをある程度作ることを考えてユーザーが行ける時間帯のデータの管理を文字列で行う
tとfで構成された288文字の文字列
１文字で対応する5分の時間に入れるかどうかをはんだんしている

#TODO 超重要事項
shiftテーブルは全て変更を加える

#TODO passwordを忘れた場合の処理

#TODO accoutのエラー分岐が細かすぎるせいでアカウントの存在が攻撃者にバレるので修正

#TODO スパム対策

#TODO newstore pageのデータを増やすこと
上限数に達しているときにそもそも開かせない処理か
上限に引っかかってるときに作成したばあい注意を促すかする


#TODO 二段階認証を求める流れを見直した方がいい

#TODO ストアに営業時間のカラムを追加
曜日ごとにtf管理するか平日と休日をわけて管理するか

tf管理の場合給与が上がる時間帯も指定できるためいいかもしれない

branch timetabel でやること
timetable をつくる
その他もろもろ DBの変更

aff に基本金額を持たせて
shiftにいくら稼いだか持たせる

### storeaccept1でやること
各ストアページに飛べるようにする
飛んだ先で必要データを全て検索しておく

### storeaccept2でやること
オーナーかそれ以外かでページの表示をわける
おーな専用のページを作る

url階層化問題

解決策
→独立URLをrouterで指定して階層になりそうなものは 全て'/'で指定して自分で書く方法

#TODO エラーメッセージはページ偏移ではなくホップのような形で実装

#TODO invite処理見直し QRコードなどで一回きりの招待を作成する方向性で
qrコードでリクエストを送信できるようにする

#TODO kick権限の作成 というか全体のユーザーの管理画面

#TODO address changeが中身なくても送信できてしまう

パスワードを忘れた場合の対策 
脆弱性の対策 
mypageの実装 
name,id,addressの再設定 
上記をスパムされないように対策664503664503
 
#TODO resendpageでvalue値書き換えられてしまう問題
備考 データは送信されるがデータは書き変わらない addresstokenが変わってたのでアウトq

#TODO セッション、トークンの時間制限 なぜかうまく行ってない

#TODO 認証が完了したことを伝える

#TODO resend 未ログイン時のリダイレクト処理

#TODO 処理が成功したときの通知

#TODO アカウント作成後のページ
メール送信したって伝えないとだめ

memo 
storepage に参加認証された後の処理

データベースを検索して参加ユーザーの時間データの有無を確かめる
（参加認証されたあとでもない場合は再度告知)

データがなかった場合、データを登録するページを表示

time申請pageで 月pm 22:00 ~ am 9:00 などがあった場合弾くか日を跨いで処理をする

ガントチャートもどき自作

3pxか5px程度のtrをオセロの時のように配置して
mouseの移動で全て管理する
